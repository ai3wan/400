# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞ –ö–£–ü–≠

## üìÅ –§–∞–π–ª—ã

- `schema.sql` - –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã, —Ç—Ä–∏–≥–≥–µ—Ä—ã)
- `seed_data.sql` - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- `update_data.sql` - –®–∞–±–ª–æ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

### üî¥ –ù–ï –î–ï–õ–ê–ô–¢–ï –≠–¢–û –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:

```bash
# ‚ùå –≠—Ç–æ –£–î–ê–õ–ò–¢ –≤—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ!
psql -U tnb_user_1_vsm400_user -h localhost -d tnb_user_1_vsm400 -f seed_data.sql
```

–§–∞–π–ª `seed_data.sql` —Å–æ–¥–µ—Ä–∂–∏—Ç `TRUNCATE TABLE` - –∫–æ–º–∞–Ω–¥—É –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö!

---

## ‚úÖ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–û–î–ò–ù –†–ê–ó):

```bash
# –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã
psql -U tnb_user_1_vsm400_user -h localhost -d tnb_user_1_vsm400 -f schema.sql

# –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–¢–û–õ–¨–ö–û –û–î–ò–ù –†–ê–ó)
psql -U tnb_user_1_vsm400_user -h localhost -d tnb_user_1_vsm400 -f seed_data.sql
```

---

## üìù –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ DBeaver (GUI) - –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø ‚≠ê

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ DBeaver –Ω–∞ –≤–∞—à–µ–º Mac
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å —á–µ—Ä–µ–∑ SSH —Ç—É–Ω–Ω–µ–ª—å –∫ –ë–î
3. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –≤–∏–∑—É–∞–ª—å–Ω–æ:
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ —Å—Ç—Ä–æ–∫–∏
   - –û–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è
   - –£–¥–∞–ª—è–π—Ç–µ –Ω–µ–Ω—É–∂–Ω–æ–µ
4. –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É –≤ –ë–î

### –í–∞—Ä–∏–∞–Ω—Ç 2: SQL –∑–∞–ø—Ä–æ—Å—ã –Ω–∞–ø—Ä—è–º—É—é

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î
psql -U tnb_user_1_vsm400_user -h localhost -d tnb_user_1_vsm400
```

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ä–∏—Å–∫
INSERT INTO riski (komponent_id, kategoriya, opisanie, veroyatnost, vliyanie, status) 
VALUES (5, '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π', '–ù–æ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π', 0.6, '–í—ã—Å–æ–∫–æ–µ', '–û—Ç–∫—Ä—ã—Ç');

-- –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ä–∏—Å–∫–∞
UPDATE riski SET status = '–ó–∞–∫—Ä—ã—Ç' WHERE id = 15;

-- –ò–∑–º–µ–Ω–∏—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
UPDATE riski SET veroyatnost = 0.3 WHERE id = 10;

-- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
INSERT INTO komponenty (nazvanie, status, progress, kompaniya_id, period)
VALUES ('–°–∏—Å—Ç–µ–º–∞ –æ—Å–≤–µ—â–µ–Ω–∏—è', '–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', 25.0, 5, 'current');

-- –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
UPDATE komponenty SET progress = 85.5 WHERE id = 1;
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ API (–±—É–¥—É—â–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å POST/PUT/DELETE endpoints –≤ FastAPI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î (–º–∏–≥—Ä–∞—Ü–∏–∏):

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É –∏–ª–∏ —Ç–∞–±–ª–∏—Ü—É:

```sql
-- –ü—Ä–∏–º–µ—Ä: –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –∫ —Ç–∞–±–ª–∏—Ü–µ
ALTER TABLE riski ADD COLUMN prioritet INTEGER DEFAULT 1;

-- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É
CREATE TABLE novaya_tablica (...);
```

---

## üìä –ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ
SELECT 'kompanii' as table_name, COUNT(*) FROM kompanii
UNION ALL SELECT 'komponenty', COUNT(*) FROM komponenty
UNION ALL SELECT 'riski', COUNT(*) FROM riski;

-- –û—Ç–∫—Ä—ã—Ç—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏
SELECT * FROM riski 
WHERE status = '–û—Ç–∫—Ä—ã—Ç' AND vliyanie = '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ' 
ORDER BY veroyatnost DESC;

-- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Ä–∏—Å–∫–∞–º–∏
SELECT k.nazvanie, COUNT(r.id) as risks_count
FROM komponenty k
LEFT JOIN riski r ON r.komponent_id = k.id
GROUP BY k.nazvanie
ORDER BY risks_count DESC;
```

---

## üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –ë–î
pg_dump -U tnb_user_1_vsm400_user -h localhost tnb_user_1_vsm400 > backup_$(date +%Y%m%d).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
psql -U tnb_user_1_vsm400_user -h localhost -d tnb_user_1_vsm400 -f backup_20251021.sql
```

---

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DBeaver –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö!** üöÄ

